<div class="card">
    <a [routerLink]="['/proyectos', unidad.id_proyecto, 'unidades', unidad.id]">
        <img
            class="image-container"
            [src]="unidad.imagen"
            (error)="handleImageError()"
            [ngStyle]="{ 'border-color': unidad.color }"
            *ngIf="!showPlaceholder"
            alt="Imagen de unidad" />
        <nz-empty
            class="image-container"
            [ngStyle]="{ 'border-color': unidad.color }"
            nzNotFoundImage="simple"
            *ngIf="showPlaceholder"
            [nzNotFoundContent]="contentTpl">
            <ng-template #contentTpl>
                Hubo un problema cargando la imagen
            </ng-template>
        </nz-empty>
    </a>
    <div class="options-button">
        <a nz-dropdown nzTrigger="click" [nzDropdownMenu]="menu">
            <span
                nz-icon
                nzType="more"
                nzTheme="outline"
                [ngStyle]="{ color: 'white' }"></span>
        </a>
        <nz-dropdown-menu #menu="nzDropdownMenu">
            <ul nz-menu nzSelectable>
                <li nz-menu-item (click)="editarUnidad()">
                    <span class="icono-opcion" nz-icon nzType="edit"></span>
                    Editar
                </li>
                <li nz-menu-item (click)="openPermisosModal()">
                    <span class="icono-opcion" nz-icon nzType="unlock"></span>
                    Permisos
                </li>
                <li nz-menu-item nzDanger (click)="showModal()">
                    <span
                        class="icono-opcion icono-borrar"
                        nz-icon
                        nzType="delete"></span>
                    Borrar
                </li>
            </ul>
        </nz-dropdown-menu>
    </div>
    <a [routerLink]="['/proyectos', unidad.id_proyecto, 'unidades', unidad.id]">
        <div class="name-label" [ngStyle]="{ color: unidad.color }">
            {{ unidad.nombre }}
        </div>
    </a>
</div>

<nz-modal
    class="modal-borrar"
    [(nzVisible)]="isVisible"
    [nzContent]="modalContent"
    [nzFooter]="null"
    (nzOnCancel)="handleCancel()">
    <ng-template #modalContent>
        <app-unidad-borrar
            [unidad]="unidad"
            [isConfirmLoading]="isConfirmLoading"
            (deleteProject)="handleOk()"
            (cancelModal)="handleCancel()" />
    </ng-template>
</nz-modal>
